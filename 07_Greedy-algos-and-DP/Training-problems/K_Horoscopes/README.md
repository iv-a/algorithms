<h1 align="center">K. –ì–æ—Ä–æ—Å–∫–æ–ø—ã</h1>

<h5 align="center">
<a href="#limits">–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è</a>
‚Ä¢
<a href="#task">–£—Å–ª–æ–≤–∏–µ –∑–∞–¥–∞—á–∏</a>
‚Ä¢
<a href="#input">–§–æ—Ä–º–∞—Ç –≤–≤–æ–¥–∞</a>
‚Ä¢
<a href="#output">–§–æ—Ä–º–∞—Ç –≤—ã–≤–æ–¥–∞</a>
‚Ä¢
<a href="#examples">–ü—Ä–∏–º–µ—Ä—ã</a>
‚Ä¢
<a href="#solution">–†–µ—à–µ–Ω–∏–µ</a>
</h5>

<br>

<table id="limits">
<tbody>
<tr>
<td>
<b>–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏</b>
</td>
<td>
0.3 —Å–µ–∫—É–Ω–¥—ã
</td>
</tr>
<tr>
<td>
<b>–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏</b>
</td>
<td>
64Mb
</td>
</tr>
<tr>
<td>
<b>–í–≤–æ–¥</b>
</td>
<td>
—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –≤–≤–æ–¥ –∏–ª–∏ input.txt
</td>
</tr>
<tr>
<td>
<b>–í—ã–≤–æ–¥</b>
</td>
<td>
—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –≤—ã–≤–æ–¥ –∏–ª–∏ output.txt
</td>
</tr>
</tbody>
</table>

<h2 id="task">–£—Å–ª–æ–≤–∏–µ –∑–∞–¥–∞—á–∏</h2>

–í –º–∏—Ä–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π –Ω–µ—Ç –≥–æ—Ä–æ—Å–∫–æ–ø–æ–≤. –ü–æ—ç—Ç–æ–º—É –∫–æ–≥–¥–∞ –¥–≤–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Ö–æ—Ç—è—Ç –ø–æ–Ω—è—Ç—å, –º–æ–≥—É—Ç –ª–∏ –æ–Ω–∏ —Å—á–∞—Å—Ç–ª–∏–≤–æ –∂–∏—Ç—å –≤–º–µ—Å—Ç–µ, –æ–Ω–∏ –æ—Ü–µ–Ω–∏–≤–∞—é—Ç —Å–≤–æ—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –∫–∞–∫ –¥–ª–∏–Ω—É –∏—Ö –Ω–∞–∏–±–æ–ª—å—à–µ–π –æ–±—â–µ–π –ø–æ–¥–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.

–ü–æ–¥–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–æ–ª—É—á–∞–µ—Ç—Å—è –∏–∑ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —É–¥–∞–ª–µ–Ω–∏–µ–º –Ω–µ–∫–æ—Ç–æ—Ä–æ–≥–æ (–≤–æ–∑–º–æ–∂–Ω–æ, –Ω—É–ª–µ–≤–æ–≥–æ) —á–∏—Å–ª–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤. –¢–æ –µ—Å—Ç—å —ç–ª–µ–º–µ–Ω—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç —Å–≤–æ–π –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫, –Ω–æ –Ω–µ –æ–±—è–∑–∞–Ω—ã –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ –∏–¥—Ç–∏ –ø–æ–¥—Ä—è–¥.

–ù–∞–π–¥–∏—Ç–µ –Ω–∞–∏–±–æ–ª—å—à—É—é –æ–±—â—É—é –ø–æ–¥–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–≤—É—Ö –æ–¥–∏–Ω–æ–∫–∏—Ö –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π –∏ –≤—ã–≤–µ–¥–∏—Ç–µ –µ—ë!

<h2 id="input">–§–æ—Ä–º–∞—Ç –≤–≤–æ–¥–∞</h2>

–í –ø–µ—Ä–≤–æ–π —Å—Ç—Ä–æ–∫–µ –¥–∞–Ω–æ —á–∏—Å–ª–æ n ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ –ø–µ—Ä–≤–æ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (1 ‚â§ n ‚â§ 1000). –í–æ –≤—Ç–æ—Ä–æ–π —Å—Ç—Ä–æ–∫–µ –¥–∞–Ω—ã n —á–∏—Å–µ–ª ai (0 ‚â§ |ai| ‚â§ 109) ‚Äî —ç–ª–µ–º–µ–Ω—Ç—ã –ø–µ—Ä–≤–æ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏. –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –≤ —Ç—Ä–µ—Ç—å–µ–π —Å—Ç—Ä–æ–∫–µ –¥–∞–Ω–æ m (1 ‚â§ m ‚â§ 1000) ‚Äî —á–∏—Å–ª–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤—Ç–æ—Ä–æ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏. –í —á–µ—Ç–≤–µ—Ä—Ç–æ–π —Å—Ç—Ä–æ–∫–µ –¥–∞–Ω—ã —ç–ª–µ–º–µ–Ω—Ç—ã –≤—Ç–æ—Ä–æ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ –ø—Ä–æ–±–µ–ª bi (0 ‚â§ |bi| ‚â§ 109).

<h2 id="output">–§–æ—Ä–º–∞—Ç –≤—ã–≤–æ–¥–∞</h2>

–°–Ω–∞—á–∞–ª–∞ –≤—ã–≤–µ–¥–∏—Ç–µ –¥–ª–∏–Ω—É –Ω–∞–π–¥–µ–Ω–Ω–æ–π –Ω–∞–∏–±–æ–ª—å—à–µ–π –æ–±—â–µ–π –ø–æ–¥–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, –≤–æ –≤—Ç–æ—Ä–æ–π —Å—Ç—Ä–æ–∫–µ –≤—ã–≤–µ–¥–∏—Ç–µ –∏–Ω–¥–µ–∫—Å—ã —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –ø–µ—Ä–≤–æ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤ –Ω–µ–π —É—á–∞—Å—Ç–≤—É—é—Ç, –≤ —Ç—Ä–µ—Ç—å–µ–π —Å—Ç—Ä–æ–∫–µ ‚Äî –∏–Ω–¥–µ–∫—Å—ã —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤—Ç–æ—Ä–æ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏. –ù—É–º–µ—Ä–∞—Ü–∏—è –∏–Ω–¥–µ–∫—Å–æ–≤ —Å –µ–¥–∏–Ω–∏—Ü—ã, –∏–Ω–¥–µ–∫—Å—ã –¥–æ–ª–∂–Ω—ã –∏–¥—Ç–∏ –≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ.

–ï—Å–ª–∏ –≤–æ–∑–º–æ–∂–Ω—ã—Ö –ù–û–ü –Ω–µ—Å–∫–æ–ª—å–∫–æ, —Ç–æ –≤—ã–≤–µ–¥–∏—Ç–µ –ª—é–±—É—é.

<h2 id="examples">–ü—Ä–∏–º–µ—Ä—ã</h2>

<h4>–ü—Ä–∏–º–µ—Ä 1</h4>
<ul>
<h6>–í–≤–æ–¥</h6>
<pre>
5
4 9 2 4 6
7
9 4 0 0 2 8 4
</pre>

<h6>–í—ã–≤–æ–¥</h6>
<pre>
3
1 3 4
2 5 7
</pre>
</ul>

<hr>

<h4>–ü—Ä–∏–º–µ—Ä 2</h4>
<ul>
<h6>–í–≤–æ–¥</h6>
<pre>
4
1 1 1 1
2
2 2
</pre>

<h6>–í—ã–≤–æ–¥</h6>
<pre>
0
</pre>
</ul>

<hr>

<h4>–ü—Ä–∏–º–µ—Ä 3</h4>
<ul>
<h6>–í–≤–æ–¥</h6>
<pre>
8
1 2 1 9 1 2 1 9
5
9 9 1 9 9
</pre>

<h6>–í—ã–≤–æ–¥</h6>
<pre>
3
3 4 8
3 4 5
</pre>
</ul>

<h2 id="solution">–†–µ—à–µ–Ω–∏–µ</h2>

```javascript
const readline = require('readline');
const io_interface = readline.createInterface({input: process.stdin});

let lineNumber = 0;
let n, m;
let arrA, arrB;
const DEX = 10;

io_interface.on('line', function (line) {
  if (lineNumber === 0) {
    n = parseInt(line, DEX);
  } else if (lineNumber === 1) {
    arrA = line.split(' ').map((item) => parseInt(item, 10));
  } else if (lineNumber === 2) {
    m = parseInt(line, DEX);
  } else if (lineNumber === 3) {
    arrB = line.split(' ').map((item) => parseInt(item, 10));
    const [ sizeOfLCS, [ aLCS, bLCS ] ] = findLCS(n, arrA, m, arrB);
    console.log(sizeOfLCS);
    if (sizeOfLCS) {
      console.log(aLCS.join(' '));
      console.log(bLCS.join(' '));
    }
  }
  lineNumber++;
});

function findLCS(n, arrA, m, arrB) {
  const dp = [...Array(n + 1)].map(() => Array(m + 1).fill(0));
  for (let i = 1; i <= n; i++) {
    for (let j = 1; j <= m; j++) {
      if (arrA[i - 1] === arrB[j - 1]) {
        dp[i][j] = dp[i - 1][j - 1] + 1;
      } else {
        dp[i][j] = Math.max(dp[i - 1][j], dp[i][j - 1]);
      }
    }
  }
  return [dp[n][m], getLCS(dp, n, arrA, m, arrB)]
}

function getLCS(dp, n, arrA, m, arrB) {
  const ansA = [];
  const ansB = [];
  let i = n;
  let j = m;
  while (dp[i][j] !== 0) {
    if (arrA[i - 1] === arrB[j - 1]) {
      ansA.push(i);
      ansB.push(j);
      i--;
      j--;
    } else {
      if (dp[i][j] === dp[i - 1][j]) {
        i--;
      } else if (dp[i][j] === dp[i][j - 1]){
        j--;
      }
    }
  }
  return [ansA.reverse(), ansB.reverse()];
}
```
<table>
  <thead>
    <tr>
      <th>–í–µ—Ä–¥–∏–∫—Ç</th>
      <th>–ö–æ–º–ø–∏–ª—è—Ç–æ—Ä</th>
      <th>–í—Ä–µ–º—è</th>
      <th>–ü–∞–º—è—Ç—å</th>
    </tr>
  </thead>
  <tbody>
<tr align="center">
<td>OK</td>
<td>Node.js 14.15.5</td>
<td>109ms</td>
<td>19.23Mb</td>
</tr>
  </tbody>
</table>

<p width="100%" align="right"><a href="#">üîù</a></p>