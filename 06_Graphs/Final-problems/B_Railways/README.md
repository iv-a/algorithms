<h1 align="center">B. –ñ–µ–ª–µ–∑–Ω—ã–µ –¥–æ—Ä–æ–≥–∏</h1>

<h5 align="center">
<a href="#limits">–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è</a>
‚Ä¢
<a href="#task">–£—Å–ª–æ–≤–∏–µ –∑–∞–¥–∞—á–∏</a>
‚Ä¢
<a href="#input">–§–æ—Ä–º–∞—Ç –≤–≤–æ–¥–∞</a>
‚Ä¢
<a href="#output">–§–æ—Ä–º–∞—Ç –≤—ã–≤–æ–¥–∞</a>
‚Ä¢
<a href="#examples">–ü—Ä–∏–º–µ—Ä—ã</a>
‚Ä¢
<a href="#solution">–†–µ—à–µ–Ω–∏–µ</a>
</h5>

<br>

<table id="limits">
<tbody>
<tr>
<td>
<b>–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏</b>
</td>
<td>
5 —Å–µ–∫—É–Ω–¥
</td>
</tr>
<tr>
<td>
<b>–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏</b>
</td>
<td>
256Mb
</td>
</tr>
<tr>
<td>
<b>–í–≤–æ–¥</b>
</td>
<td>
—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –≤–≤–æ–¥ –∏–ª–∏ input.txt
</td>
</tr>
<tr>
<td>
<b>–í—ã–≤–æ–¥</b>
</td>
<td>
—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –≤—ã–≤–æ–¥ –∏–ª–∏ output.txt
</td>
</tr>
</tbody>
</table>

<h2 id="task">–£—Å–ª–æ–≤–∏–µ –∑–∞–¥–∞—á–∏</h2>

–í —Å—Ç—Ä–∞–Ω–µ X –µ—Å—Ç—å n –≥–æ—Ä–æ–¥–æ–≤, –∫–æ—Ç–æ—Ä—ã–º –ø—Ä–∏—Å–≤–æ–µ–Ω—ã –Ω–æ–º–µ—Ä–∞ –æ—Ç 1 –¥–æ n. –°—Ç–æ–ª–∏—Ü–∞ —Å—Ç—Ä–∞–Ω—ã –∏–º–µ–µ—Ç –Ω–æ–º–µ—Ä n. –ú–µ–∂–¥—É –≥–æ—Ä–æ–¥–∞–º–∏ –ø—Ä–æ–ª–æ–∂–µ–Ω—ã –∂–µ–ª–µ–∑–Ω—ã–µ –¥–æ—Ä–æ–≥–∏.

–û–¥–Ω–∞–∫–æ –¥–æ—Ä–æ–≥–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –¥–≤—É—Ö —Ç–∏–ø–æ–≤ –ø–æ —à–∏—Ä–∏–Ω–µ –ø–æ–ª–æ—Ç–Ω–∞. –õ—é–±–æ–π –ø–æ–µ–∑–¥ –º–æ–∂–µ—Ç –µ–∑–¥–∏—Ç—å —Ç–æ–ª—å–∫–æ –ø–æ –æ–¥–Ω–æ–º—É —Ç–∏–ø—É –ø–æ–ª–æ—Ç–Ω–∞. –£—Å–ª–æ–≤–Ω–æ –æ–¥–∏–Ω —Ç–∏–ø –¥–æ—Ä–æ–≥ –ø–æ–º–µ—á–∞—é—Ç –∫–∞–∫ R, –∞ –¥—Ä—É–≥–æ–π –∫–∞–∫ B. –¢–æ –µ—Å—Ç—å –µ—Å–ª–∏ –º–∞—Ä—à—Ä—É—Ç –æ—Ç –æ–¥–Ω–æ–≥–æ –≥–æ—Ä–æ–¥–∞ –¥–æ –¥—Ä—É–≥–æ–≥–æ –∏–º–µ–µ—Ç –∫–∞–∫ –¥–æ—Ä–æ–≥–∏ —Ç–∏–ø–∞ R, —Ç–∞–∫ –∏ –¥–æ—Ä–æ–≥–∏ —Ç–∏–ø–∞ B, —Ç–æ –Ω–∏ –æ–¥–∏–Ω –ø–æ–µ–∑–¥ –Ω–µ —Å–º–æ–∂–µ—Ç –ø–æ —ç—Ç–æ–º—É –º–∞—Ä—à—Ä—É—Ç—É –ø—Ä–æ–µ—Ö–∞—Ç—å. –û—Ç –æ–¥–Ω–æ–≥–æ –≥–æ—Ä–æ–¥–∞ –¥–æ –¥—Ä—É–≥–æ–≥–æ –º–æ–∂–Ω–æ –ø—Ä–æ–µ—Ö–∞—Ç—å —Ç–æ–ª—å–∫–æ –ø–æ –º–∞—Ä—à—Ä—É—Ç—É, —Å–æ—Å—Ç–æ—è—â–µ–º—É –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ –∏–∑ –¥–æ—Ä–æ–≥ —Ç–∏–ø–∞ R –∏–ª–∏ —Ç–æ–ª—å–∫–æ –∏–∑ –¥–æ—Ä–æ–≥ —Ç–∏–ø–∞ B.

–ù–æ —ç—Ç–æ –µ—â—ë –Ω–µ –≤—Å—ë. –ü–æ –¥–æ—Ä–æ–≥–∞–º —Å—Ç—Ä–∞–Ω—ã X –º–æ–∂–Ω–æ –¥–≤–∏–≥–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –æ—Ç –≥–æ—Ä–æ–¥–∞ —Å –º–µ–Ω—å—à–∏–º –Ω–æ–º–µ—Ä–æ–º –∫ –≥–æ—Ä–æ–¥—É —Å –±–æ–ª—å—à–∏–º –Ω–æ–º–µ—Ä–æ–º. –≠—Ç–æ –æ–±—ä—è—Å–Ω—è–µ—Ç –±–æ–ª—å—à–æ–π –ø—Ä–∏—Ç–æ–∫ –∂–∏—Ç–µ–ª–µ–π –≤ —Å—Ç–æ–ª–∏—Ü—É, —É –∫–æ—Ç–æ—Ä–æ–π –Ω–æ–º–µ—Ä n.

–ö–∞—Ä—Ç–∞ –∂–µ–ª–µ–∑–Ω—ã—Ö –¥–æ—Ä–æ–≥ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π, –µ—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ø–∞—Ä—ã –≥–æ—Ä–æ–¥–æ–≤ A –∏ B —Ç–∞–∫–æ–π, —á—Ç–æ –æ—Ç A –¥–æ B –º–æ–∂–Ω–æ –¥–æ–±—Ä–∞—Ç—å—Å—è –∫–∞–∫ –ø–æ –¥–æ—Ä–æ–≥–∞–º —Ç–∏–ø–∞ R, —Ç–∞–∫ –∏ –ø–æ –¥–æ—Ä–æ–≥–∞–º —Ç–∏–ø–∞ B. –ò–Ω—ã–º–∏ —Å–ª–æ–≤–∞–º–∏, –¥–ª—è –ª—é–±–æ–π –ø–∞—Ä—ã –≥–æ—Ä–æ–¥–æ–≤ –≤–µ—Ä–Ω–æ, —á—Ç–æ –æ—Ç –≥–æ—Ä–æ–¥–∞ —Å –º–µ–Ω—å—à–∏–º –Ω–æ–º–µ—Ä–æ–º –¥–æ –≥–æ—Ä–æ–¥–∞ —Å –±–û–ª—å—à–∏–º –Ω–æ–º–µ—Ä–æ–º –º–æ–∂–Ω–æ –¥–æ–±—Ä–∞—Ç—å—Å—è –ø–æ –¥–æ—Ä–æ–≥–∞–º —Ç–æ–ª—å–∫–æ –∫–∞–∫–æ–≥–æ-—Ç–æ –æ–¥–Ω–æ–≥–æ —Ç–∏–ø–∞ –∏–ª–∏ –∂–µ —á—Ç–æ –º–∞—Ä—à—Ä—É—Ç –ø–æ—Å—Ç—Ä–æ–∏—Ç—å –≤–æ–æ–±—â–µ –Ω–µ–ª—å–∑—è. –í—ã—è—Å–Ω–∏—Ç–µ, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –¥–∞–Ω–Ω–∞—è –≤–∞–º –∫–∞—Ä—Ç–∞ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π.

<h2 id="input">–§–æ—Ä–º–∞—Ç –≤–≤–æ–¥–∞</h2>

–í –ø–µ—Ä–≤–æ–π —Å—Ç—Ä–æ–∫–µ –¥–∞–Ω–æ —á–∏—Å–ª–æ n (1 ‚â§ n ‚â§ 5000) ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–æ—Ä–æ–¥–æ–≤ –≤ —Å—Ç—Ä–∞–Ω–µ. –î–∞–ª–µ–µ –∑–∞–¥–∞–Ω–∞ –∫–∞—Ä—Ç–∞ –∂–µ–ª–µ–∑–Ω—ã—Ö –¥–æ—Ä–æ–≥ –≤ —Å–ª–µ–¥—É—é—â–µ–º —Ñ–æ—Ä–º–∞—Ç–µ.

–ö–∞—Ä—Ç–∞ –∑–∞–¥–∞–Ω–∞ n-1 —Å—Ç—Ä–æ–∫–æ–π. –í i-–π —Å—Ç—Ä–æ–∫–µ –æ–ø–∏—Å–∞–Ω—ã –¥–æ—Ä–æ–≥–∏ –∏–∑ –≥–æ—Ä–æ–¥–∞ i –≤ –≥–æ—Ä–æ–¥–∞ i+1, i+2, ..., n. –í —Å—Ç—Ä–æ–∫–µ –∑–∞–ø–∏—Å–∞–Ω–æ n - i —Å–∏–º–≤–æ–ª–æ–≤, –∫–∞–∂–¥—ã–π –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –ª–∏–±–æ R, –ª–∏–±–æ B. –ï—Å–ª–∏ j-–π —Å–∏–º–≤–æ–ª —Å—Ç—Ä–æ–∫–∏ i —Ä–∞–≤–µ–Ω ¬´B¬ª, —Ç–æ –∏–∑ –≥–æ—Ä–æ–¥–∞ i –≤ –≥–æ—Ä–æ–¥ i + j –∏–¥–µ—Ç –¥–æ—Ä–æ–≥–∞ —Ç–∏–ø–∞ ¬´B¬ª. –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –¥–ª—è —Ç–∏–ø–∞ ¬´R¬ª.

<h2 id="output">–§–æ—Ä–º–∞—Ç –≤—ã–≤–æ–¥–∞</h2>

–í—ã–≤–µ–¥–∏—Ç–µ ¬´YES¬ª, –µ—Å–ª–∏ –∫–∞—Ä—Ç–∞ –æ–ø—Ç–∏–º–∞–ª—å–Ω–∞, –∏ ¬´NO¬ª –≤ –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ.

<h2 id="examples">–ü—Ä–∏–º–µ—Ä—ã</h2>

<h4>–ü—Ä–∏–º–µ—Ä 1</h4>
<ul>
<h6>–í–≤–æ–¥</h6>
<pre>
3
RB
R
</pre>

<h6>–í—ã–≤–æ–¥</h6>
<pre>
NO
</pre>
</ul>

<hr>

<h4>–ü—Ä–∏–º–µ—Ä 2</h4>
<ul>
<h6>–í–≤–æ–¥</h6>
<pre>
4
BBB
RB
B
</pre>

<h6>–í—ã–≤–æ–¥</h6>
<pre>
YES
</pre>
</ul>

<hr>

<h4>–ü—Ä–∏–º–µ—Ä 3</h4>
<ul>
<h6>–í–≤–æ–¥</h6>
<pre>
5
RRRB
BRR
BR
R
</pre>

<h6>–í—ã–≤–æ–¥</h6>
<pre>
NO
</pre>
</ul>

<h2 id="solution">–†–µ—à–µ–Ω–∏–µ</h2>

```javascript
/*

-- –ü–†–ò–ù–¶–ò–ü –†–ê–ë–û–¢–´ --
–ü—Ä–∏–Ω—Ü–∏–ø —Ä–µ—à–µ–Ω–∏—è –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ —Ç–æ–º, —á—Ç–æ –ø—Ä–∏ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–∏ –æ–¥–Ω–æ–≥–æ —Ç–∏–ø–∞ –¥–æ—Ä–æ–≥ –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ä–µ–±–µ—Ä –≥—Ä–∞—Ñ–∞, –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö –ø–æ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—é –∑–Ω–∞—á–µ–Ω–∏—è –≤–µ—Ä—à–∏–Ω –≥—Ä–∞—Ñ–∞, –∞ –¥—Ä—É–≥–æ–≥–æ —Ç–∏–ø–∞ –¥–æ—Ä–æ–≥ –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ä–µ–±–µ—Ä –ø–æ —É–±—ã–≤–∞–Ω–∏—é –∑–Ω–∞—á–µ–Ω–∏–π –≤–µ—Ä—à–∏–Ω –≥—Ä–∞—Ñ–∞, —Ç–æ –∏—Å—Ö–æ–¥–Ω—É—é –∑–∞–¥–∞—á—É –º–æ–∂–Ω–æ —Å–≤–µ—Å—Ç–∏ –∫ –ø–æ–∏—Å–∫—É —Ü–∏–∫–ª–∞ –≤ –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –≥—Ä–∞—Ñ–µ. –ê –ó–∞–¥–∞—á–∞ –ø–æ–∏—Å–∫–∞ —Ü–∏–∫–ª–∞ —É–∂–µ —Ä–µ—à–∞–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é –∞–ª–≥–æ—Ä–∏—Ç–º–∞ –ø–æ–∏—Å–∫–∞ –≤ –≥–ª—É–±–∏–Ω—É. –î–ª—è —ç—Ç–æ–≥–æ –ø—Ä–æ–∏–∑–≤–µ–¥—ë–º —Å–µ—Ä–∏—é –æ–±—Ö–æ–¥–æ–≤. –¢–æ –µ—Å—Ç—å –∏–∑ –∫–∞–∂–¥–æ–π –≤–µ—Ä—à–∏–Ω—ã, –≤ –∫–æ—Ç–æ—Ä—É—é –º—ã –µ—â—ë –Ω–∏ —Ä–∞–∑—É –Ω–µ –ø—Ä–∏—Ö–æ–¥–∏–ª–∏, –∑–∞–ø—É—Å—Ç–∏–º –ø–æ–∏—Å–∫ –≤ –≥–ª—É–±–∏–Ω—É, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏ –≤—Ö–æ–¥–µ –≤ –≤–µ—Ä—à–∏–Ω—É –±—É–¥–µ—Ç –∫—Ä–∞—Å–∏—Ç—å –µ—ë –≤ —Å–µ—Ä—ã–π —Ü–≤–µ—Ç, –∞ –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ –∏–∑ –Ω–µ–µ ‚Äî –≤ —á—ë—Ä–Ω—ã–π. –ò, –µ—Å–ª–∏ –∞–ª–≥–æ—Ä–∏—Ç–º –ø—ã—Ç–∞–µ—Ç—Å—è –ø–æ–π—Ç–∏ –≤ —Å–µ—Ä—É—é –≤–µ—Ä—à–∏–Ω—É, —Ç–æ —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —Ü–∏–∫–ª –Ω–∞–π–¥–µ–Ω.

-- –î–û–ö–ê–ó–ê–¢–ï–õ–¨–°–¢–í–û –ö–û–†–†–ï–ö–¢–ù–û–°–¢–ò --
–†–∞—Å—Å–º–æ—Ç—Ä–∏–º –ø—Ä–∏–º–µ—Ä—ã (–ü—Ä–∏–ª–æ–∂–µ–Ω–Ω–∞—è –∫–∞—Ä—Ç–∏–Ω–∫–∞).
____________________________________
–ü—Ä–∏–º–µ—Ä 1. –ö–∞—Ä—Ç–∞ –Ω–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω–∞—è:
–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:
3
RB
R
--------------------------
–†–∞—Å—Å–º–æ—Ç—Ä–∏–º —Ä–∏—Å—É–Ω–æ–∫ 1:
–î–∞–Ω–Ω–∞—è –∫–∞—Ä—Ç–∞ —è–≤–ª—è–µ—Ç—Å—è –Ω–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π, —Ç.–∫. –∏–∑ –≤–µ—Ä—à–∏–Ω—ã 1 –º–æ–∂–Ω–æ –ø–æ–ø–∞—Å—Ç—å –≤ –≤–µ—Ä—à–∏–Ω—É 3 –ø–æ –æ–±–æ–∏–º —Ç–∏–ø–∞–º –¥–æ—Ä–æ–≥: 1-3 (B) –∏ 1-2-3 (R).
–ï—Å–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Ä–æ–≥–∏ B, —Ç–æ –ø–æ–ª—É—á–∏—Ç—Å—è —Ü–∏–∫–ª (–†–∏—Å—É–Ω–æ–∫ 2)
____________________________________
–ü—Ä–∏–º–µ—Ä 2. –ö–∞—Ä—Ç–∞ –æ–ø—Ç–∏–º–∞–ª—å–Ω–∞—è:
–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:
3
RB
B
--------------------------
–†–∞—Å—Å–º–æ—Ç—Ä–∏–º —Ä–∏—Å—É–Ω–æ–∫ 3:
–î–∞–Ω–Ω–∞—è –∫–∞—Ä—Ç–∞ —è–≤–ª—è–µ—Ç—Å—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π, —Ç.–∫. –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ø–∞—Ä—ã –≥–æ—Ä–æ–¥–æ–≤ A –∏ B —Ç–∞–∫–æ–π, —á—Ç–æ –æ—Ç A –¥–æ B –º–æ–∂–Ω–æ –¥–æ–±—Ä–∞—Ç—å—Å—è –∫–∞–∫ –ø–æ –¥–æ—Ä–æ–≥–∞–º —Ç–∏–ø–∞ R, —Ç–∞–∫ –∏ –ø–æ –¥–æ—Ä–æ–≥–∞–º —Ç–∏–ø–∞ B.
–ï—Å–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Ä–æ–≥–∏ B, —Ç–æ —Ü–∏–∫–ª–∞ –Ω–µ –±—É–¥–µ—Ç (–†–∏—Å—É–Ω–æ–∫ 4)

-- –í–†–ï–ú–ï–ù–ù–ê–Ø –°–õ–û–ñ–ù–û–°–¢–¨ --
detectCycle –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ –≤–µ—Ä—à–∏–Ω—ã ‚à£V‚à£, hasCycle –ø—Ä–æ—Ö–æ–¥–∏—Ç—Å—è –ø–æ –≤—Å–µ–º —Å–ø–∏—Å–∫–∞–º —Å–º–µ–∂–Ω–æ—Å—Ç–∏ (–ø–æ –∫–∞–∂–¥–æ–º—É —Ä–µ–±—Ä—É) ‚à£E‚à£.
–ò—Ç–æ–≥–æ–≤–∞—è –≤—Ä–µ–º–µ–Ω–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å –∞–ª–≥–æ—Ä–∏—Ç–º–∞: O(‚à£V‚à£+‚à£E‚à£),
–≥–¥–µ |E| ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä—ë–±–µ—Ä –≤ –≥—Ä–∞—Ñ–µ,
    |V| ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–µ—Ä—à–∏–Ω.

-- –ü–†–û–°–¢–†–ê–ù–°–¢–í–ï–ù–ù–ê–Ø –°–õ–û–ñ–ù–û–°–¢–¨ --
1. –°–ø–∏–∫–∏ —Å–º–µ–∂–Ω–æ—Å—Ç–∏ - O(|V| + |E|);
2. –ê—Å—Å–æ—Ü–∏–∞—Ç–∏–≤–Ω—ã–π –º–∞—Å—Å–∏–≤ —Ü–≤–µ—Ç–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–π –≤–µ—Ä—à–∏–Ω—ã O(|V|);

–û–±—â–∞—è –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å: O(|V| + |E|) + O(|V|) = O(|V| + |E|),
–≥–¥–µ |E| ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä—ë–±–µ—Ä –≤ –≥—Ä–∞—Ñ–µ,
    |V| ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–µ—Ä—à–∏–Ω.

*/


// –ö–ª–∞—Å—Å –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –≥—Ä–∞—Ñ–∞ –≤ –≤–∏–¥–µ —Å–ø–∏—Å–∫–∞ —Å–º–µ–∂–Ω–æ—Å—Ç–∏:
// –í—Å–µ –≤–µ—Ä—à–∏–Ω—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –∞—Å—Å–æ—Ü–∏–∞—Ç–∏–≤–Ω–æ–º –º–∞—Å—Å–∏–≤–µ, –≤ –∫–æ—Ç–æ—Ä–æ–º –∫–ª—é—á–∞–º–∏ —è–≤–ª—è—é—Ç—Å—è –≤–µ—Ä—à–∏–Ω—ã, –∞ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –º–∞—Å—Å–∏–≤—ã —Å–º–µ–∂–Ω—ã—Ö –∫ –Ω–∏–º –≤–µ—Ä—à–∏–Ω : –≤–µ—Ä—à–∏–Ω–∞_1 => { [–≤–µ—Ä—à–∏–Ω–∞_2, –≤–µ—Ä—à–∏–Ω–∞_3 ]}.
// -------------------------------------------
// –ü—Ä–∏–º–µ—Ä: Map(4) { 1 => [], 2 => [ 1, 3 ], 3 => [ 1 ], 4 => [ 1, 2, 3 ] }
// -------------------------------------------
class Graph {
  constructor(numberOfVertices) {
    this.n = numberOfVertices;
    this.adj = new Map();
    for (let i = 1; i <= this.n; i++) {
      this.adj.set(i, []);
    }
  }
  // –ú–µ—Ç–æ–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ä–µ–±—Ä–∞ –≤ –≥—Ä–∞—Ñ
  addEdge(vertexA, vertexB) {
    // –ü–æ–ª—É—á–∞–µ–º –º–∞—Å—Å–∏–≤ –≤–µ—Ä—à–∏–Ω, —Å–º–µ–∂–Ω—ã—Ö —Å –≤–µ—Ä—à–∏–Ω–æ–π –ê
    const neighbors = this.adj.get(vertexA);
    // –î–æ–±–∞–≤–ª—è–µ–º —Å–º–µ–∂–Ω—É—é –∫ –ê –≤–µ—Ä—à–∏–Ω—É –í –≤ –º–∞—Å—Å–∏–≤
    neighbors.push(vertexB);
    // –î–æ–±–∞–≤–ª—è–µ–º –≤–µ—Ä—à–∏–Ω—É –ê –≤ —Å–ø–∏—Å–æ–∫ —Å–º–µ–∂–Ω–æ—Å—Ç–∏
    this.adj.set(vertexA, neighbors);
  }
}

// –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ–∏—Å–∫–∞ –≤ –≥–ª—É–±–∏–Ω—É –¥–ª—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è —Ü–∏–∫–ª–æ–≤
function detectCycle(graph) {
  // –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–∏—Å–∫–∞ –≤ –≥–ª—É–±–∏–Ω—É (DFS) –∏–∑ –∑–∞–¥–∞–Ω–Ω–æ–π –≤–µ—Ä—à–∏–Ω—ã  –Ω–∞ —Å—Ç–µ–∫–µ
  function hasCycle(startVertex) {
    // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å—á–∏—Ç–∞–µ–º, —á—Ç–æ —Ü–∏–∫–ª –≤ –≥—Ä–∞—Ñ–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
    let isCycle = false;
    // –ó–∞–≤–æ–¥–∏–º —Å—Ç–µ–∫ –∏ –¥–æ–±–∞–≤–ª—è–µ–º –≤ –Ω–µ–≥–æ –∑–∞–¥–∞–Ω–Ω—É—é –≤–µ—Ä—à–∏–Ω—É
    const stack = [];
    stack.push(startVertex);
    // –ü–æ–∫–∞ —Å—Ç–µ–∫ –Ω–µ –ø—É—Å—Ç:
    while (stack.length > 0) {
      // –ò–∑–≤–ª–µ–∫–∞–µ–º –∏–∑ —Å—Ç–µ–∫–∞ –≤–µ—Ä—à–∏–Ω—É
      const vertex = stack.pop();
      if (colors.get(vertex) === CONSTANTS.COLOR.WHITE) {
        // –ï—Å–ª–∏ –≤–µ—Ä—à–∏–Ω–∞ –±–µ–ª–∞—è, –∫—Ä–∞—Å–∏–º –µ—ë –≤ —Å–µ—Ä—ã–π
        colors.set(vertex, CONSTANTS.COLOR.GRAY);
        // –ö–ª–∞–¥–µ–º –µ–µ –æ–±—Ä–∞—Ç–Ω–æ –≤ —Å—Ç–µ–∫
        stack.push(vertex);
        // –ü–æ–ª—É—á–∞–µ–º —Å–ø–∏—Å–æ–∫ —Å–º–µ–∂–Ω—ã—Ö –≤–µ—Ä—à–∏–Ω
        const adj = graph.adj.get(vertex);
        // –ü—Ä–æ—Ö–æ–¥–∏–º—Å—è –ø–æ –∫–∞–∂–¥–æ–π —Å–º–µ–∂–Ω–æ–π –≤–µ—Ä—à–∏–Ω–µ
        adj.forEach((neighbor) => {
          // –ï—Å–ª–∏ –æ–Ω–∞ –±–µ–ª–∞—è, —Ç–æ –∫–ª–∞–¥–µ–º –µ–µ –≤ —Å—Ç–µ–∫
          if (colors.get(neighbor) === CONSTANTS.COLOR.WHITE) stack.push(neighbor);
          // –ï—Å–ª–∏ –æ–Ω–∞ —Å–µ—Ä–∞—è, —Ç–æ —Ü–∏–∫–ª –æ–±–Ω–∞—Ä—É–∂–µ–Ω
          if (colors.get(neighbor) === CONSTANTS.COLOR.GRAY) isCycle = true;
        });
      } else if (colors.get(vertex) === CONSTANTS.COLOR.GRAY) {
        // –ï—Å–ª–∏ –≤–µ—Ä—à–∏–Ω–∞ —Å–µ—Ä–∞—è, –∫—Ä–∞—Å–∏–º –µ–µ –≤ —á–µ—Ä–Ω—ã–π
        colors.set(vertex, CONSTANTS.COLOR.BLACK);
      }
    }
    return isCycle;
  }
  // –ê—Å—Å–æ—Ü–∏–∞—Ç–∏–≤–Ω—ã–π –º–∞—Å—Å–∏–≤ —Ü–≤–µ—Ç–æ–≤, –≤ –∫–æ—Ç–æ—Ä–æ–º –∫–ª—é—á–æ–º —è–≤–ª—è–µ—Ç—Å—è –Ω–æ–º–µ—Ä –≤–µ—Ä—à–∏–Ω—ã, –∞ –∑–Ω–∞—á–µ–Ω–∏–µ–º - –µ–µ —Ü–≤–µ—Ç
  const colors = new Map();
  // –ò–∑–Ω–∞—á–∞–ª—å–Ω–æ –∫—Ä–∞—Å–∏–º –≤—Å–µ –≤–µ—Ä—à–∏–Ω—ã –≥—Ä–∞—Ñ–∞ –≤ –±–µ–ª—ã–π
  for (let vertex = 1; vertex <= graph.n; vertex++) {
    colors.set(vertex, CONSTANTS.COLOR.WHITE);
  }
  for (let vertex = 1; vertex <= graph.n; vertex++) {
    // –î–ª—è –∫–∞–∂–¥–æ–π –≤–µ—Ä—à–∏–Ω—ã –≥—Ä–∞—Ñ–∞, –µ—Å–ª–∏ –æ–Ω–∞ –±–µ–ª–∞—è, –∑–∞–ø—É—Å–∫–∞–µ–º –ø–æ–∏—Å–∫ –≤ –≥–ª—É–±–∏–Ω—É
    // if (colors.get(vertex) === CONSTANTS.COLOR.WHITE) {
    if (hasCycle(vertex)) return true;
    // }
  }
  return false;
}

// –§—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫–∞—Ä—Ç—ã –∂–µ–ª–µ–∑–Ω—ã—Ö –¥–æ—Ä–æ–≥
function getMapOfRailways(graph, city, railways) {
  railways.forEach((railway, index) => {
    if (railway === CONSTANTS.RAILWAYS.R) {
      // –ï—Å–ª–∏ –¥–æ—Ä–æ–≥–∞ R, —Ç–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–±—Ä–∞ –æ—Ç –≤–µ—Ä—à–∏–Ω—ã —Å –º–µ–Ω—å—à–∏–º –Ω–æ–º–µ—Ä–æ–º –∫ –≤–µ—Ä—à–∏–Ω–µ —Å –±–æ–ª—å—à–∏–º –Ω–æ–º–µ—Ä–æ–º
      graph.addEdge(city, city + index + 1);
    } else if (railway === CONSTANTS.RAILWAYS.B) {
      // –ï—Å–ª–∏ –¥–æ—Ä–æ–≥–∞ B, —Ç–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–±—Ä–∞ –æ—Ç –≤–µ—Ä—à–∏–Ω—ã —Å –±–æ–ª—å—à–∏–º –Ω–æ–º–µ—Ä–æ–º –∫ –≤–µ—Ä—à–∏–Ω–µ —Å –º–µ–Ω—å—à–∏–º –Ω–æ–º–µ—Ä–æ–º
      graph.addEdge(city + index + 1, city);
    }
  })
}

const readline = require('readline');
const io_interface = readline.createInterface({input: process.stdin});

const CONSTANTS = {
  RAILWAYS: {
    R: 'R',
    B: 'B',
  },
  COLOR: {
    WHITE: 0,
    GRAY: 1,
    BLACK: 2,
  },
  ANS: {
    NO: 'NO',
    YES: 'YES',
  },
};

let lineNumber = 0;
let numberOfCities;
let graph, city;

io_interface.on('line', function (line) {
  if (lineNumber === 0) {
    numberOfCities = parseInt(line, 10);
    graph = new Graph(numberOfCities);
    city = 1;
  } else if (lineNumber < numberOfCities) {
    let railways = line.split('');
    getMapOfRailways(graph, city, railways);
    city++;
  }
  lineNumber++;
});

io_interface.on('close', function () {
  console.log(detectCycle(graph) ? CONSTANTS.ANS.NO : CONSTANTS.ANS.YES);
});
```
<table>
  <thead>
    <tr>
      <th>–í–µ—Ä–¥–∏–∫—Ç</th>
      <th>–ö–æ–º–ø–∏–ª—è—Ç–æ—Ä</th>
      <th>–í—Ä–µ–º—è</th>
      <th>–ü–∞–º—è—Ç—å</th>
    </tr>
  </thead>
  <tbody>
<tr align="center">
<td>OK</td>
<td>Node.js 14.15.5</td>
<td>2.728s</td>
<td>207.54Mb</td>
</tr>
  </tbody>
</table>

<p width="100%" align="right"><a href="#">üîù</a></p>